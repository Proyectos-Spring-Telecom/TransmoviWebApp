<div class="login-wrapper">
  <div class="login-card">
    <img src="./assets/images/arte/Logo_TransMovi.png" alt="Logo Transmovi" class="logo-header" />
    <h2>Afiliación Pasajero</h2>
    <form [formGroup]="afiliacionPasajero" (ngSubmit)="agregar()">
      <div class="row">
        <div class="col-12 col-md-6">
          <div class="input-group">
            <label for="nombre">Nombre</label>
            <input type="text" id="nombre" formControlName="nombre" placeholder="Ej.: Osmar Sahid"
              autocomplete="given-name" />
          </div>
        </div>
        <div class="col-12 col-md-6">
          <div class="input-group">
            <label for="apellidoPaterno">Apellido Paterno</label>
            <input type="text" id="apellidoPaterno" formControlName="apellidoPaterno" placeholder="Ej.: Martínez"
              autocomplete="family-name" />
          </div>
        </div>
        <div class="col-12 col-md-6">
          <div class="input-group">
            <label for="apellidoMaterno">Apellido Materno</label>
            <input type="text" id="apellidoMaterno" formControlName="apellidoMaterno" placeholder="Ej.: García"
              autocomplete="additional-name" />
          </div>
        </div>
        <div class="col-12 col-md-6">
          <div class="input-group">
            <label for="fechaNacimiento">Fecha de Nacimiento</label>
            <input type="date" id="fechaNacimiento" formControlName="fechaNacimiento" placeholder="Ej.: 2000-06-20"
              autocomplete="bday" inputmode="numeric" />
          </div>
        </div>
        <div class="col-12 col-md-6">
          <div class="input-group">
            <label for="telefono">Teléfono</label>
            <input type="tel" id="telefono" maxlength="10" (keypress)="allowOnlyNumbers($event)" formControlName="telefono" placeholder="Ej.: 7773896248" autocomplete="tel"
              inputmode="tel" />
          </div>
        </div>
        <div class="col-12 col-md-6">
          <div class="input-group">
            <label for="correo">Correo Electrónico</label>
            <input type="email" id="correo" formControlName="correo" placeholder="Ej.: proyect.beeckerco@outlook.com"
              autocomplete="email" inputmode="email" />
          </div>
        </div>
        <div class="col-12 col-md-6">
          <div class="input-group" style="position: relative;">
            <label for="passwordHash">Contraseña</label>
            <input [type]="type" id="passwordHash" formControlName="passwordHash" placeholder="Ej.: P@ssw0rd."
              autocomplete="new-password" (focus)="pwFocused = true" (blur)="pwFocused = false" />

            <button type="button" class="eyeButton"
              style="color:#a1a1a1; position:absolute; right:10px; top:38px; background:transparent; border:0; cursor:pointer;"
              (click)="myFunctionPasswordCurrent()"
              [attr.aria-label]="type === 'password' ? 'Mostrar contraseña' : 'Ocultar contraseña'">
              <i class="fas" [ngClass]="type === 'password' ? 'fa-eye' : 'fa-eye-slash'"></i>
            </button>
            <div *ngIf="showPwHint" class="pw-hint" [class.ok]="pwAllOk" [class.bad]="!pwAllOk"
              [@fadeOnChange]="pwGuideKey" [@fadeInOut] aria-live="polite" style="margin-top:8px;">
              <i class="fa" [ngClass]="pwAllOk ? 'fa-check-circle' : 'fa-exclamation-circle'"></i>
              {{ pwGuideText }}
            </div>
          </div>
        </div>
        <div class="col-12 col-md-6">
          <div class="input-group">
            <label for="numeroSerieMonedero">Número de Serie</label>
            <input type="text" id="numeroSerieMonedero" formControlName="numeroSerieMonedero"
              placeholder="Ej.: MON-0005" autocomplete="off" />
          </div>
        </div>
      </div>
      <div class="extra-links">
        <a [routerLink]="['/account','login']">Iniciar Sesión</a>
      </div>
      <button type="button" class="btn btn-success waves-effect waves-light" data-bs-toggle="modal"
  data-bs-target=".bs-example-modal-lg" (click)="largeModal(largeDataModal)">Large modal</button>
      <div style="display: flex; align-items: center; justify-content: center;">
        <button type="submit" class="login-btn"
          style="width: 50%; display: flex; align-items: center; justify-content: center;">
          <div class="justify">
            <span @fadeInUp *ngIf="loading" class="loader"></span>
            <span *ngIf="!loading">Guardar</span>
            <span style="margin-left: 5px;" *ngIf="loading">Cargando...</span>
          </div>
        </button>
      </div>
    </form>
  </div>
</div>



<ng-template #largeDataModal let-modal style="background-color: #0061c1; border-color: none;">
  <div class="card-header-custom">
    <h5 class="modal-title" id="myLargeModalLabel">Verificación de Cuenta</h5>
  </div>
  <div class="card-body route-modal">
    <div>Hola, nos alegra que estés aquí. Para terminar el registro, ingresa el código de 4 dígitos que te enviamos a tu correo.</div>
    <div class="otp-wrapper">
  <div class="otp-inputs" role="group" aria-label="Código de verificación">
    <input #otpInput class="otp-box" type="text" inputmode="numeric" pattern="[0-9]*" maxlength="1"
           aria-label="Dígito 1" autocomplete="one-time-code"
           (input)="onOtpInput($event, 0)" (keydown)="onOtpKeydown($event, 0)" />
    <input #otpInput class="otp-box" type="text" inputmode="numeric" pattern="[0-9]*" maxlength="1"
           aria-label="Dígito 2" autocomplete="one-time-code"
           (input)="onOtpInput($event, 1)" (keydown)="onOtpKeydown($event, 1)" />
    <input #otpInput class="otp-box" type="text" inputmode="numeric" pattern="[0-9]*" maxlength="1"
           aria-label="Dígito 3" autocomplete="one-time-code"
           (input)="onOtpInput($event, 2)" (keydown)="onOtpKeydown($event, 2)" />
    <input #otpInput class="otp-box" type="text" inputmode="numeric" pattern="[0-9]*" maxlength="1"
           aria-label="Dígito 4" autocomplete="one-time-code"
           (input)="onOtpInput($event, 3)" (keydown)="onOtpKeydown($event, 3)" />
  </div>

  <div class="otp-actions">
    <button type="button" class="btn-verify" (click)="onVerify()">Verificar</button>

    <button type="button" class="btn-resend"
            [disabled]="resendDisabled"
            (click)="onResend()">
      <ng-container *ngIf="!resendDisabled; else waitTpl">Reenviar código</ng-container>
      <ng-template #waitTpl>Volver a enviar en {{ resendSeconds }}s</ng-template>
    </button>
  </div>
</div>

<br>
    <div style="display: flex; align-items: center; justify-content: center; margin-top: 10px;">¿No reciste el correo? Revisa tu carpeta de spam o solicita de nuevo.</div>
  </div>
</ng-template>